<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CorbenX — Projects</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="docs/favicon.ico">

  <style>
    * { font-family: 'Inter', sans-serif; }
  </style>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            corbenxBlue: '#316EA6',
            corbenxGray: '#7B8C94',
            corbenxDark: '#20343F',
            corbenxNavy: '#001565',
            corbenxLight: '#009FE3'
          },
          animation: {
            'float-slow': 'float 6s ease-in-out infinite',
            'spin-slow': 'spin 8s linear infinite'
          },
          keyframes: {
            float: { '0%': { transform: 'translateY(0px)' }, '50%': { transform: 'translateY(-6px)' }, '100%': { transform: 'translateY(0px)' } }
          }
        }
      }
    }
  </script>

  <style>
    /* page-specific styling */
    :root { --accent: #316EA6; --accent-2: #7B8C94; --dark-bg: #20343F; }
    .hero-gradient { background: linear-gradient(120deg, rgba(49,110,166,1) 0%, rgba(0,159,227,0.85) 35%, rgba(35,48,63,0.95) 100%); background-size: 300% 300%; animation: gradientShift 12s ease infinite; }
    @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    .slide-hidden { max-height: 0; overflow: hidden; transition: max-height 420ms cubic-bezier(.2,.9,.2,1); }
    .slide-open { max-height: 1600px; transition: max-height 520ms cubic-bezier(.2,.9,.2,1); }
    .chev { transition: transform 320ms cubic-bezier(.2,.9,.2,1); }
    .chev-open { transform: rotate(180deg); }
    .modal-bg { background: rgba(6,8,15,0.72); backdrop-filter: blur(6px); }
    .thumb-active { box-shadow: 0 12px 32px rgba(3,18,29,0.22); transform: translateY(-6px); border: 3px solid rgba(49,110,166,0.12); }
    .glass { background: linear-gradient(180deg, rgba(255,255,255,0.65), rgba(255,255,255,0.5)); backdrop-filter: blur(6px); }
    .dark .glass { background: linear-gradient(180deg, rgba(9,10,12,0.6), rgba(18,20,24,0.6)); }
    .fade-up { transform: translateY(14px); opacity: 0; transition: transform .6s cubic-bezier(.2,.9,.2,1), opacity .6s; }
    .fade-up.in-view { transform: translateY(0); opacity: 1; }
    .grad-border { border: 1px solid transparent; background-origin: border-box; background-clip: padding-box, border-box; background-image: linear-gradient(#fff, #fff), linear-gradient(90deg, rgba(49,110,166,0.14), rgba(0,159,227,0.12)); }
    .dark .grad-border { background-image: linear-gradient(#0b0f13, #0b0f13), linear-gradient(90deg, rgba(49,110,166,0.14), rgba(0,159,227,0.12)); }
    .thumb-small { width: 92px; height: 64px; object-fit: cover; }
    .fab { position: fixed; right: 18px; bottom: 18px; z-index: 70; }
  </style>
</head>

<body class="bg-white dark:bg-corbenxDark text-slate-900 dark:text-gray-100 antialiased">

  <!-- HEADER -->
  <div id="header-placeholder" class="bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-lg transition-all duration-500 fixed inset-x-0 top-0 z-40"></div>

  <!-- MAIN -->
  <main class="container mx-auto px-6 pt-28 pb-28">

    <!-- HERO -->
    <section class="hero-gradient rounded-2xl text-white p-8 md:p-16 relative overflow-hidden shadow-xl">
      <div class="absolute inset-0 opacity-20 mix-blend-multiply pointer-events-none"></div>
      <div class="relative z-10 text-center">
        <h1 class="text-3xl md:text-5xl font-extrabold mb-2" data-en="CorbenX Projects" data-fr="Projets CorbenX">CorbenX Projects</h1>
        <p class="max-w-2xl mx-auto text-lg md:text-xl opacity-90" data-en="Large-scale construction & engineering works — selected case studies and gallery." data-fr="Projets de construction et d'ingénierie d'envergure — études de cas et galerie sélectionnées.">Large-scale construction & engineering works — selected case studies and gallery.</p>
        <div class="mt-6 flex items-center justify-center gap-4">
          <span class="inline-flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full text-sm"><i class="fas fa-building"></i> <span data-en="Construction" data-fr="Construction">Construction</span></span>
          <span class="inline-flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full text-sm"><i class="fas fa-wrench"></i> <span data-en="Engineering" data-fr="Ingénierie">Engineering</span></span>
        </div>
      </div>
      <svg class="absolute -right-24 -top-12 opacity-30 w-80 h-80 animate-float-slow" viewBox="0 0 200 200"><defs><linearGradient id="g1"><stop offset="0" stop-color="#ffffff" stop-opacity="0.08"/><stop offset="1" stop-color="#000000" stop-opacity="0"/></linearGradient></defs><circle cx="60" cy="60" r="80" fill="url(#g1)"></circle></svg>
    </section>

    <!-- BIG PROJECTS -->
    <section class="mt-10">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-semibold" data-en="Big Projects" data-fr="Grands Projets">Big Projects</h2>
        <p class="text-sm text-gray-600 dark:text-gray-300" data-en="Click the chevron to expand project showcase" data-fr="Cliquez sur la flèche pour ouvrir la vitrine">Click the chevron to expand project showcase</p>
      </div>
      <div id="bigProjectsContainer" class="space-y-6 overflow-hidden"></div>
    </section>

    <!-- Divider -->
    <div class="my-12 border-t border-gray-100 dark:border-gray-800"></div>

    <!-- OTHER PROJECTS GRID -->
    <section>
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-semibold" data-en="Other Projects" data-fr="Autres Projets">Other Projects</h2>
        <p class="text-sm text-gray-600 dark:text-gray-300" data-en="Gallery — click an image to view" data-fr="Galerie — cliquez sur une image pour voir">Gallery — click an image to view</p>
      </div>
      <div id="otherGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
    </section>
  </main>

  <!-- FOOTER -->
  <div id="footer-placeholder" class=" text-white relative overflow-hidden" style="background: linear-gradient(135deg, #243B48, #316EA6);"></div>

  <!-- MEDIA MODAL -->
  <div id="mediaModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
    <div class="relative w-full max-w-6xl mx-4">
      <button id="modalClose" aria-label="Close" class="absolute top-3 right-3 z-50 p-2 rounded-full bg-white/90 dark:bg-gray-800/80 shadow">
        <i class="fas fa-times text-slate-800 dark:text-white"></i>
      </button>
      <div id="modalInner" class="bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl"></div>
    </div>
  </div>

<script>
/* ===========================
   Unified projects-only script
   =========================== */

/* -------- Import header/footer -------- */
async function importSection(url, selector, placeholderId, callback) {
    try {
        const res = await fetch(url);
        const text = await res.text();
        const tmp = document.createElement('div');
        tmp.innerHTML = text;
        const section = tmp.querySelector(selector);
        if (!section) return;

        const placeholder = document.getElementById(placeholderId);
        placeholder.innerHTML = section.outerHTML;

        // copy <style>
        section.querySelectorAll('style').forEach(s => {
            const st = document.createElement('style');
            st.textContent = s.textContent;
            document.head.appendChild(st);
        });

        // copy <script>
        section.querySelectorAll('script').forEach(s => {
            const sc = document.createElement('script');
            if (s.src) sc.src = s.src;
            else sc.textContent = s.textContent;
            document.body.appendChild(sc);
        });

        if (callback) callback();
    } catch (err) {
        console.error("importSection error", err);
    }
}

/* -------- Sample Data -------- */
const BIG_PROJECTS = [
    {
      id:'metro-tower',
      title:{en:'Metropolitan Tower Complex',fr:'Complexe Metropolitan Tower'},
      desc:{en:'42-storey mixed-use development with sustainable terraces and integrated public spaces.',fr:'Développement à usage mixte de 42 étages avec terrasses durables et espaces publics intégrés.'},
      images:[
        'https://picsum.photos/seed/metro1/1600/900',
        'https://picsum.photos/seed/metro2/1600/900',
        'https://picsum.photos/seed/metro3/1600/900',
        'https://picsum.photos/seed/metro4/1600/900'
      ]
    },
    {
      id:'green-plant',
      title:{en:'Green Energy Plant',fr:'Centrale d’Énergie Verte'},
      desc:{en:'Renewable energy facility combining solar, wind and storage to support regional grid resilience.',fr:'Installation d’énergie renouvelable combinant solaire, éolien et stockage pour la résilience du réseau régional.'},
      images:[
        'https://picsum.photos/seed/green1/1600/900',
        'https://picsum.photos/seed/green2/1600/900',
        'https://picsum.photos/seed/green3/1600/900'
      ]
    },
    {
      id:'bridge-expansion',
      title:{en:'River Bridge Expansion',fr:'Extension du Pont'},
      desc:{en:'Major infrastructure upgrade widening the bridge and improving load capacity.',fr:'Amélioration d’infrastructure majeure élargissant le pont et renforçant la capacité de charge.'},
      images:[
        'https://picsum.photos/seed/bridge1/1600/900',
        'https://picsum.photos/seed/bridge2/1600/900',
        'https://picsum.photos/seed/bridge3/1600/900'
      ]
    }
];
const OTHER_PROJECT_IMAGES = Array.from({length:12},(_,i)=>`https://picsum.photos/seed/other${i+1}/1200/800`);

/* -------- Theme & Language Setup -------- */
let lang = localStorage.getItem('language') || 'en';
let theme = localStorage.getItem('theme') || 'light';
if(theme==='dark') document.documentElement.classList.add('dark');
document.documentElement.lang = lang;

/* -------- Language Functions -------- */
function setLanguageGlobal(l){
  lang = l;
  localStorage.setItem('language', l);
  updateTexts();
  highlightLanguageButtons();
}
function updateTexts(){
  // update [data-en]/[data-fr]
  document.querySelectorAll('[data-en]').forEach(el=>{
    el.textContent = el.dataset[lang] || el.dataset.en;
  });
  // placeholders
  document.querySelectorAll(`[data-${lang}-placeholder]`).forEach(el=>{
    el.placeholder = el.getAttribute(`data-${lang}-placeholder`);
  });
  // options
  document.querySelectorAll('select option').forEach(opt=>{
    const t = opt.getAttribute(`data-${lang}`);
    if (t) opt.textContent = t;
  });
  renderBigProjects();
  renderOtherGrid();

  // -----  opacity button language -----
  ['langEn','langFr','langEnMobile','langFrMobile'].forEach(id=>{
    const btn = document.getElementById(id);
    if(!btn) return;
    const isActive = (lang==='en' && id.toLowerCase().includes('en')) ||
                     (lang==='fr' && id.toLowerCase().includes('fr'));
    if(isActive){
        btn.style.backgroundColor = '#243B48'; // couleur active pleine
    } else {
        btn.style.backgroundColor = 'rgba(36, 59, 72, 0)'; // couleur inactive avec opacité
    }
});
}

/* -------- Highlight + Slide Language Buttons -------- */
function highlightLanguageButtons(){
  const buttons=['langEn','langFr','langEnMobile','langFrMobile'];
  buttons.forEach(id=>{
    const btn=document.getElementById(id);
    if(!btn) return;
    if((lang==='en' && id.toLowerCase().includes('en')) ||
       (lang==='fr' && id.toLowerCase().includes('fr'))){
      btn.classList.add('active-lang');
    }else{
      btn.classList.remove('active-lang');
    }
  });
}

function updateLanguageButtons() {
  const allBtns = ['langEn','langFr','langEnMobile','langFrMobile'];
  allBtns.forEach(id => {
    const btn = document.getElementById(id);
    if(btn){
      btn.style.transition = 'background-color 0.3s ease'; // <-- transition fluide
      if ((id.toLowerCase().includes('en') && lang==='en') || (id.toLowerCase().includes('fr') && lang==='fr')) {
        btn.style.backgroundColor = '#243B48'; // actif
      } else {
        btn.style.backgroundColor = 'rgba(36, 59, 72, 0.5)'; // inactif
      }
    }
  });
}

/* -------- Theme Functions -------- */
function toggleTheme(){
  document.documentElement.classList.toggle('dark');
  localStorage.setItem('theme', document.documentElement.classList.contains('dark')?'dark':'light');
}

/* -------- Attach Listeners -------- */
function attachHeaderListeners(){
  document.getElementById('darkToggle')?.addEventListener('click', toggleTheme);
  document.getElementById('darkToggleMobile')?.addEventListener('click', toggleTheme);

  document.getElementById('langEn')?.addEventListener('click', ()=>setLanguageGlobal('en'));
  document.getElementById('langFr')?.addEventListener('click', ()=>setLanguageGlobal('fr'));
  document.getElementById('langEnMobile')?.addEventListener('click', ()=>setLanguageGlobal('en'));
  document.getElementById('langFrMobile')?.addEventListener('click', ()=>setLanguageGlobal('fr'));

  // apply saved state once header is loaded
  highlightLanguageButtons();
}

/* -------- Rendering -------- */
const bigContainer=document.getElementById('bigProjectsContainer');
const otherGrid=document.getElementById('otherGrid');

function renderBigProjects(){
  bigContainer.innerHTML='';
  BIG_PROJECTS.forEach(p=>{
    const card=document.createElement('article'); 
    card.className='grad-border rounded-2xl overflow-hidden shadow-sm glass';

    const row=document.createElement('div'); row.className='md:flex';
    const left=document.createElement('div'); left.className='md:w-1/3';
    const img=document.createElement('img'); 
    img.src=p.images[0]; 
    img.alt=p.title[lang]; 
    img.className='w-full h-52 md:h-44 object-cover';
    left.appendChild(img);

    const right=document.createElement('div'); right.className='md:w-2/3 p-5 relative';
    const title=document.createElement('h3'); 
    title.className='text-xl font-semibold text-corbenxNavy dark:text-corbenxLight'; 
    title.textContent=p.title[lang];
    const desc=document.createElement('p'); 
    desc.className='mt-2 text-gray-600 dark:text-gray-300'; 
    desc.textContent=p.desc[lang];

    const chev=document.createElement('button'); 
    chev.className='absolute right-4 top-4 w-10 h-10 rounded-full bg-white/95 dark:bg-gray-700/90 shadow flex items-center justify-center hover:scale-105 transition'; 
    chev.innerHTML=`<i class="fas fa-chevron-down chev text-corbenxNavy dark:text-corbenxLight"></i>`;
    right.append(title, desc, chev);
    row.append(left, right);
    card.appendChild(row);

    const details=document.createElement('div'); 
    details.className='hidden border-t border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-900 p-5 slide-hidden';
    const showcaseMain=document.createElement('img');
    showcaseMain.src=p.images[0];
    showcaseMain.alt=p.title[lang];
    showcaseMain.className='w-full h-64 object-cover rounded-md cursor-pointer';
    showcaseMain.addEventListener('click',()=>openModal(showcaseMain.src));
    details.appendChild(showcaseMain);

    const thumbs=document.createElement('div'); thumbs.className='mt-4 flex gap-3 overflow-x-auto pb-1';
    p.images.forEach((src,i)=>{
      const t=document.createElement('img'); 
      t.src=src; 
      t.alt=`${p.title[lang]} thumb ${i+1}`; 
      t.className='w-28 h-20 object-cover rounded-md cursor-pointer border thumb-small';
      t.addEventListener('click',()=>{ showcaseMain.src=src; thumbs.querySelectorAll('img').forEach(im=>im.classList.remove('thumb-active')); t.classList.add('thumb-active'); });
      thumbs.appendChild(t);
    });
    details.appendChild(thumbs);

    const meta=document.createElement('div'); meta.className='mt-4 flex items-center justify-between';
    const metaLeft=document.createElement('div'); metaLeft.className='text-sm text-gray-600 dark:text-gray-300'; metaLeft.innerHTML=`<strong>${p.title[lang]}</strong>`;
    const viewBtn=document.createElement('button'); 
    viewBtn.className='px-4 py-2 rounded-md bg-corbenxNavy text-white text-sm hover:opacity-90 transition'; 
    viewBtn.textContent=(lang==='fr')?'Voir la galerie':'View gallery';
    viewBtn.addEventListener('click',()=>openModal(showcaseMain.src));
    meta.append(metaLeft, viewBtn);
    details.appendChild(meta);

    chev.addEventListener('click',()=>{
      details.classList.toggle('hidden');
    });

    card.appendChild(details);
    bigContainer.appendChild(card);
  });
}

function renderOtherGrid(){
  otherGrid.innerHTML='';
  OTHER_PROJECT_IMAGES.forEach(src=>{
    const btn=document.createElement('button');
    btn.className='relative rounded-xl overflow-hidden focus:outline-none';
    const img=document.createElement('img');
    img.src=src;
    img.className='w-full h-32 object-cover rounded-xl cursor-pointer';
    btn.appendChild(img);
    btn.addEventListener('click',()=>openModal(src));
    otherGrid.appendChild(btn);
  });
}

/* -------- Modal -------- */
const modal=document.getElementById('mediaModal');
const modalInner=document.getElementById('modalInner');
document.getElementById('modalClose').addEventListener('click',()=>modal.classList.add('hidden'));
modal.addEventListener('click',e=>{ if(e.target===modal) modal.classList.add('hidden'); });
function openModal(src){ modalInner.innerHTML=`<img src="${src}" class="w-full h-auto max-h-[80vh] object-contain rounded-md">`; modal.classList.remove('hidden'); }

/* -------- Init -------- */
importSection('index.html','#header','header-placeholder',()=>{
  attachHeaderListeners();
  updateTexts();
});
importSection('index.html','#footer','footer-placeholder');

window.addEventListener('DOMContentLoaded',()=>{
  updateTexts();
  updateLanguageButtons();
});
</script>

<style>
/* Slide dropdown + language button active state */
.active-lang {
  background-color:#243B48 !important;
  color:white !important;
  transition:all 0.3s ease-in-out;
}
.slide-hidden {
  max-height:0;
  overflow:hidden;
  transition:max-height 0.4s ease;
}
.slide-hidden:not(.hidden) {
  max-height:1000px;
}
</style>



</body>
</html>
